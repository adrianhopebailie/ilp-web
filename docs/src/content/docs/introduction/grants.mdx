---
title: Grant negotiation and authorization
---

import { CodeBlock, LinkOut } from '@interledger/docs-design-system'

Before a client can issue instructions for an incoming payment, quote, or outgoing payment, it must obtain the requisite grant(s). Open Payments leverages the <LinkOut href='https://datatracker.ietf.org/doc/html/draft-ietf-gnap-core-protocol'>Grant Negotiation and Authorization Protocol (GNAP)</LinkOut> to define a standard mechanism for clients to obtain grants. GNAP is a protocol being developed by the Internet Engineering Task Force (IETF) as the successor to OAuth 2.0, designed to fill many of the gaps discovered through the use of OAuth in Open Banking and other financial use cases.

## Grants

GNAP allows a client instance to request delegated authorization to protected resources from a party other than the end user. This delegation is facilitated by an authorization server, which exposes APIs compliant with the GNAP standard. The process by which the delegation occurs is known as a grant.

## Grant requests

An authorization server is uniquely identified by its grant endpoint URI, which is an absolute URI that a client calls to initiate a grant request.

The grant request flow can take one of the paths below, with the first being the most common.

- Grant &rarr; incoming payment &rarr; grant &rarr; quote &rarr; grant &rarr; outgoing payment
- Grant &rarr; incoming payment &rarr; grant &rarr; quote &rarr; outgoing payment

A successfully issued grant results in the client receiving an access token. The access token:

- Represents the rights granted to the client
- Acts as credentials when calling a resource server’s Open Payments API
- Allows the client to access protected resources (primarily OP-enabled accounts) on an ASE’s resource server and perform operations on these resources

:::note
An open-source implementation of an Open Payments resource server, called <LinkOut href='https://rafiki.dev'>Rafiki</LinkOut>, is currently in development.
:::

The authorization of access to an OP-enabled account can be separated from the ASE if desired. The authorization service can even be fulfilled by multiple federated providers if a use case requires this in the future.

### Incoming payment grant

A client requests an [incoming payment grant](/apis/resource-server/operations/create-incoming-payment) from the authorization server on the _payee_ side. The client can request one grant to create multiple incoming payments for different OP-enabled accounts as long as each account belongs to the same ASE.

Incoming payment grants are non-interactive by default, meaning interaction by an individual (typically the client's end-user) is not required for the authorization server to issue an access token.

### Quote grant

A client requests a [quote](/apis/resource-server/operations/create-quote) from the authorization server on the _payer_ side. The client can request one grant to create multiple quotes for different OP-enabled accounts as long as each account belongs to the same ASE.

Quote grants are non-interactive by default, meaning interaction by an individual (typically the client's end-user) is not required for the authorization server to issue an access token.

### Outgoing payment grant

A client requests an [outgoing payment grant](/apis/resource-server/operations/create-outgoing-payment) from the authorization server on the _payer_ side. Open Payments requires outgoing payment grants to be interactive, meaning interaction by an individual (typically the client's end-user) is required. After interaction is finished, the client must issue a [grant continuation request](/apis/auth-server/operations/post-continue).

For more information, refer to the [create an interactive grant](/guides/create-interactive-grant) guide.

## Grant continuation and cancellation

A client can issue a [grant continuation request](/apis/auth-server/operations/post-continue) when a grant needs to be modified or continued. For example, a client may initially need read access to a resource, but later require write access.

A client can request to [cancel a grant](/apis/auth-server/operations/delete-continue) if it no longer needs access to protected resources on the resource server.
